<div ng-controller="View1Ctrl" class="container">


    <div class="row">
        <div class="col-md-3">
            <label class="btn btn-default btn-file">
                Select file <input type="file" style="display: none;" on-read-file="showContent($content)">
            </label>
        </div>
        <div class="col-md-9">
            <h3 class="tool-presentation-text">Placeholder</h3>
            <p>
                Link para o principal xpdl usado nos testes: <a href="https://www.dropbox.com/s/xdn619d9jvpkwss/Example5.xpdl?dl=0"> Link </a>
				<br>
				Imagem do processo do respectivo xpdl: <a href="https://www.dropbox.com/s/nkhtia5t7g8izq8/Example5.gif?dl=0 "> Link </a>
            </p>
        </div>
    </div>


    <div class="row " ng-if="readableProcess">
        <h1>File content is:</h1>

        <div class="col-md-4">


            <div class="well well-lg taskColumn">

                <div ng-repeat="actor in readableProcess.getActors()" class="actor">
                    <span ng-if="actor == '' "> Actor: No Actors! </span>
                    <span ng-if="actor != '' "> Actor: {{ actor }} </span>


                    <div class="btn-group pull-right" role="group" >
                        <button type="button" class="btn btn-primary taskToggler" type="button" status="hidden">
                            Show Tasks</button>
                        <button type="button" class="btn btn-warning" ng-click="removeActor(readableProcess, actor)">
                            Remove Actor</button>
                    </div>


                    <div ng-repeat="readableTask in readableProcess.getTasksByActor(actor)" class="tasks">

                        <span>Task Definition :</span>
                        <span>{{ readableTask.getDefinition() }}</span>

                        <div ng-controller="ModalCtrl as $ctrl" class="modal-demo">
                            <button class="btn btn-default pull-right" ng-click="openDefinition(readableTask)">+</button>

                            <script type="text/ng-template" id="myModalContentDefinition.html">
                                <div class="modal-header">
                                    <h3 class="modal-title" id="modal-title-definition">Change task definition</h3>
                                </div>
                                <div class="modal-body" id="modal-body-definition">
                                    <input type="text" ng-model="newDefinition">
                                </div>
                                <div class="modal-footer">
                                    <button class="btn btn-primary" type="button" ng-click="$ctrl.ok('definition')">OK</button>
                                    <button class="btn btn-warning" type="button" ng-click="$ctrl.cancel()">Cancel</button>
                                </div>
                            </script>
                        </div>


                        <br/>
                        <br/>
                        <br/>

                        <span>Comments:</span>
                        <span ng-if="readableTask.getComment(0)" ng-repeat="comment in readableTask.getAllComment()">
                            {{ comment }}, </span>
                        <span ng-if="!readableTask.getComment(0)"> No comments! </span>

                        <div ng-controller="ModalCtrl as $ctrl" class="modal-demo">
                            <button class="btn btn-default pull-right" ng-click="openComments(readableTask)">+</button>

                            <script type="text/ng-template" id="myModalContentComments.html">
                                <div class="modal-header">
                                    <h3 class="modal-title" id="modal-title-comment">Add Comments to the task</h3>
                                </div>
                                <div class="modal-body" id="modal-body-comment">
                                    <input type="text" ng-model="newComment">
                                </div>
                                <div class="modal-footer">
                                    <button class="btn btn-primary" type="button" ng-click="$ctrl.ok('comment')">OK</button>
                                    <button class="btn btn-warning" type="button" ng-click="$ctrl.cancel()">Cancel</button>
                                </div>
                            </script>
                        </div>

                        <br/>
                        <br/>

                        <button class="btn btn-warning" ng-click="removeTask(readableProcess, readableTask)">
                            Remove Task
                        </button>

                        <br/>
                    </div>
                </div>


            </div>


        </div>

        <button class="btn btn-default" ng-click="draw(readableProcess)">
            Draw Process
        </button>
        <div class="well well-lg col-md-8 drawing">
            <canvas id="processCanvas" width="730px" height="500px"></canvas>
        </div>

    </div>

    <div class="row" ng-if="readableProcess.getDisabledTask(0)">
        <div class="col-md-4 well well-lg ">
            <h2>Disabled Activities:</h2>
            <button class="btn btn-primary pull-right disabledToggler" type="button" status="hidden">
                Show Disabled Tasks</button>

            <div class="tasks" ng-repeat="readableTask in readableProcess.getDisabledTasks()">
                <h3>Task {{$index + 1}} </h3>



                <span>Task actor:</span>
                <span ng-if="readableTask.getActor(0)" ng-repeat="actor in readableTask.getAllActor()">
                    {{ actor }},  </span>
                <span ng-if="!readableTask.getActor(0)"> No Actors! </span>

                <br/>

                <span>Task Definition :</span>
                <span>{{ readableTask.getDefinition() }}</span>

                <br/>

                <span>Comments:</span>
                <span ng-if="readableTask.getComment(0)" ng-repeat="comment in readableTask.getAllComment()">
                    {{ comment }}, </span>
                <span ng-if="!readableTask.getComment(0)"> No comments! </span>


            </div>
        </div>
    </div>
</div>

<script>

    $(document).on("click", ".taskToggler", function() {

        //alert($(this).attr("status") == "hidden");

        if($(this).attr("status") == "hidden"){
            $(this).html("Hide Tasks");
            $(this).attr("status", "exposed");
            $(this).parent().parent().children(".tasks").css("display","inline-block");
        }
        else if($(this).attr("status") == "exposed") {
            $(this).parent().parent().children(".tasks").css("display","none");
            $(this).attr("status", "hidden");
            $(this).html("Show Tasks");
        }
    });

    $(document).on("click", ".disabledToggler", function() {

        if($(this).attr("status") == "hidden"){
            $(this).html("Hide Disabled Tasks");
            $(this).attr("status", "exposed");
            $(this).parent().children(".tasks").css("display","inline-block");
        }
        else if($(this).attr("status") == "exposed") {
            $(this).parent().children(".tasks").css("display","none");
            $(this).attr("status", "hidden");
            $(this).html("Show Disabled Tasks");
        }
    });




</script>



